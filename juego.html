<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Vitalis | Cl√≠nica Odontol√≥gica</title>
    <link rel="stylesheet" href="style.css">

</head>
<body>

    <nav>
     <div class="logo-container">
    <a href="index.html">
        <img src="img/logo.jpg" alt="Vitalis" class="logo-img" style="height: 50px;">
    </a>
</div>
    
    <div class="hamburger" onclick="toggleMenu()">
        ‚ò∞
    </div>

    <div class="nav-links" id="menu-links">
        <a href="index.html">Inicio</a>
        <a href="especialidades.html">Especialidades</a>
        <a href="equipo.html">Equipo</a>
        <a href="juego.html">Jugar</a>
        <a href="contacto.html">Contacto</a>
    </div>
</nav>

    <header class="hero">
        <h1>Tu sonrisa en manos expertas</h1>
        <p>Gabriela Mistral 79, Malalhue</p>
        <a href="https://wa.me/56957006747" class="btn-whatsapp">Agendar Evaluaci√≥n</a>
    </header>

    <section id="vitalis-game-widget">
    <style>
        /* Estilos encapsulados para el Widget de Vitalis */
        #vitalis-game-widget {
            /* Variables Locales */
            --v-bg: #EBF5FB;
            --v-primary: #29B6F6;
            --v-dark: #01579B;
            --v-white: #FFFFFF;
            --v-success: #66BB6A;
            --v-error: #EF5350;
            --v-gray: #455A64;
            
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--v-bg);
            color: var(--v-dark);
            border-radius: 20px;
            padding: 20px;
            max-width: 500px; /* Ancho m√°ximo del juego */
            margin: 0 auto;   /* Centrado */
            box-shadow: 0 4px 20px rgba(0,0,0,0.05);
            position: relative;
            overflow: hidden;
        }

        /* Reset b√°sico solo para el widget */
        #vitalis-game-widget * {
            box-sizing: border-box;
        }

        /* Header Interno del Juego */
        .v-header-bar {
            background: linear-gradient(135deg, #ffffff 0%, #E1F5FE 100%);
            padding: 10px 15px;
            border-radius: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            margin-bottom: 20px;
        }

        .v-logo-area { display: flex; align-items: center; gap: 10px; }
        .v-logo-circle {
            width: 35px; height: 35px; background: var(--v-white);
            border-radius: 50%; border: 2px solid var(--v-primary);
            display: flex; align-items: center; justify-content: center;
            font-size: 16px; font-weight: bold; color: var(--v-primary);
        }
        .v-brand-title { font-size: 1rem; font-weight: 800; color: var(--v-dark); line-height: 1; }
        .v-brand-sub { font-size: 0.7rem; opacity: 0.8; }

        /* Tarjetas y Estructura */
        .v-card {
            background: var(--v-white);
            padding: 25px 20px;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(41, 182, 246, 0.15);
            text-align: center;
            animation: v-fadeIn 0.4s ease-out;
        }

        .v-hidden { display: none !important; }

        /* Formularios */
        .v-form-group { margin-bottom: 15px; text-align: left; }
        .v-form-group label { display: block; margin-bottom: 5px; font-size: 0.9rem; color: var(--v-gray); font-weight: 600; }
        .v-input {
            width: 100%; padding: 12px; border: 2px solid #B3E5FC;
            border-radius: 10px; font-size: 1rem; outline: none; transition: 0.3s;
            background: #fff; color: #333;
        }
        .v-input:focus { border-color: var(--v-primary); }

        /* Botones */
        .v-btn {
            border: none; padding: 12px 25px; border-radius: 50px;
            font-size: 1rem; font-weight: bold; width: 100%; cursor: pointer;
            margin-top: 10px; transition: transform 0.2s;
        }
        .v-btn:active { transform: scale(0.98); }
        .v-btn-primary { background: var(--v-primary); color: white; box-shadow: 0 4px 10px rgba(41, 182, 246, 0.4); }
        .v-btn-secondary { background: transparent; color: var(--v-primary); border: 2px solid var(--v-primary); }

        /* Elementos del Juego */
        .v-emoji-header { font-size: 3.5rem; display: block; margin-bottom: 10px; }
        .v-progress-track { background: #ECEFF1; height: 8px; border-radius: 4px; margin-bottom: 20px; width: 100%; overflow: hidden; }
        .v-progress-fill { background: var(--v-primary); height: 100%; width: 0%; transition: width 0.3s; }
        
        .v-option-btn {
            background: var(--v-bg); border: 2px solid transparent;
            padding: 15px; border-radius: 12px; font-size: 0.95rem;
            color: var(--v-dark); font-weight: 500; cursor: pointer;
            width: 100%; margin-bottom: 10px; text-align: left; transition: all 0.2s;
        }
        .v-option-btn.v-correct { background: #E8F5E9; border-color: var(--v-success); color: #2E7D32; }
        .v-option-btn.v-wrong { background: #FFEBEE; border-color: var(--v-error); color: #C62828; opacity: 0.6; }

        .v-hint-box { background: #FFF3E0; border: 1px solid #FFCC80; color: #E65100; padding: 15px; border-radius: 10px; margin-top: 15px; display: none; text-align: left; font-size: 0.9rem; }

        /* Niveles y Ranking */
        .v-level-card {
            background: var(--v-white); padding: 15px; border-radius: 15px;
            display: flex; justify-content: space-between; align-items: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05); margin-bottom: 10px;
            border-left: 5px solid var(--v-primary); cursor: pointer;
        }
        .v-level-card.v-locked { background: #ECEFF1; border-color: var(--v-gray); opacity: 0.7; pointer-events: none; }
        
        .v-ranking-table { width: 100%; border-collapse: collapse; margin-top: 15px; font-size: 0.9rem; }
        .v-ranking-table th { text-align: left; padding: 8px; color: var(--v-primary); border-bottom: 2px solid #E1F5FE; }
        .v-ranking-table td { padding: 10px 8px; border-bottom: 1px solid #f0f0f0; }
        .v-user-row { background-color: #E1F5FE; font-weight: bold; }

        @keyframes v-fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>

    <div class="v-header-bar">
        <div class="v-logo-circle" style="overflow: hidden; padding: 0;">
    <img src="img/logo.jpg" alt="Logo Vitalis" style="width: 100%; height: 100%; object-fit: cover;">
</div>
                <div class="v-brand-title">Vitalis</div>
                <div class="v-brand-sub">Cl√≠nica Odontol√≥gica</div>
            </div>
        </div>
        <div id="v-score-display" class="v-hidden" style="font-size: 0.9rem; font-weight: bold; color: var(--v-primary);">
            <span id="v-current-points">0</span> pts
        </div>
    </div>

    <div id="v-game-content">

        <div id="v-screen-login" class="v-card">
            <span class="v-emoji-header">üëã</span>
            <h3 style="margin-top:0; color:var(--v-primary);">¬°Bienvenido!</h3>
            <p style="font-size:0.9rem; margin-bottom:20px;">Aprende sobre tu sonrisa y gana premios.</p>
            <form onsubmit="vGame.handleLogin(event)">
                <div class="v-form-group">
                    <label>Nombre</label>
                    <input type="text" id="v-input-name" class="v-input" placeholder="Ej: Sof√≠a" required>
                </div>
                <div class="v-form-group">
                    <label>Tel√©fono</label>
                    <input type="tel" id="v-input-phone" class="v-input" placeholder="987654321" required>
                </div>
                <div class="v-form-group">
                    <label>Correo</label>
                    <input type="email" id="v-input-email" class="v-input" placeholder="mama@gmail.com" required>
                </div>
                <button type="submit" class="v-btn v-btn-primary">Jugar</button>
                <button type="button" class="v-btn v-btn-secondary" onclick="vGame.showRanking()">Ver Ranking</button>
            </form>
        </div>

        <div id="v-screen-menu" class="v-card v-hidden">
            <div style="display:flex; gap:10px; margin-bottom:20px; align-items:center;">
                <div style="font-size:2.5rem;">ü¶∑</div>
                <div style="text-align:left;">
                    <div style="font-size:0.8rem; color:#666;">Hola, <b id="v-player-name"></b></div>
                    <div style="font-weight:bold; font-size:0.9rem; line-height:1.2;">¬°Completa los niveles!</div>
                </div>
            </div>
            <div id="v-levels-list"></div>
            <button class="v-btn v-btn-secondary" onclick="vGame.showRanking()">Ver Ranking</button>
        </div>

        <div id="v-screen-game" class="v-card v-hidden">
            <div style="display:flex; justify-content:space-between; margin-bottom:10px; font-size:0.8rem; color:#999;">
                <span id="v-lvl-name">Nivel 1</span>
                <span id="v-q-counter">1/5</span>
            </div>
            <div class="v-progress-track"><div id="v-progress-bar" class="v-progress-fill"></div></div>
            
            <span id="v-q-emoji" style="font-size:3rem; display:block; margin-bottom:10px;">ü§î</span>
            <p id="v-q-text" style="font-weight:600; font-size:1.1rem; margin-bottom:20px;">Pregunta...</p>
            
            <div id="v-options-box"></div>
            
            <div id="v-hint-box" class="v-hint-box">üí° <span id="v-hint-text"></span></div>
            <button id="v-next-btn" class="v-btn v-btn-primary v-hidden" onclick="vGame.nextQuestion()">Siguiente</button>
        </div>

        <div id="v-screen-blocked" class="v-card v-hidden">
            <span class="v-emoji-header">‚è≥</span>
            <h3>¬°Ya jugaste!</h3>
            <p>Solo puedes registrar un puntaje por semana. ¬°Vuelve el lunes!</p>
            <button class="v-btn v-btn-secondary" onclick="vGame.showRanking()">Ver Tabla</button>
        </div>

        <div id="v-screen-result" class="v-card v-hidden">
            <span class="v-emoji-header">üéâ</span>
            <h3 style="color:var(--v-primary);">¬°Terminado!</h3>
            <div style="font-size:3rem; font-weight:800; color:var(--v-dark);" id="v-final-score">0</div>
            <p>Puntos Totales</p>
            
            <div id="v-coupon" class="v-hidden" style="background:#FFF8E1; border:2px dashed #FFCA28; padding:10px; border-radius:10px; margin:15px 0;">
                <b style="color:#FF6F00;">¬°GANASTE!</b><br>
                Usa el c√≥digo: <b style="font-size:1.2rem;">DIENTE20</b>
            </div>
            
            <button class="v-btn v-btn-primary" onclick="vGame.showRanking()">Ver Ranking</button>
        </div>

        <div id="v-screen-ranking" class="v-card v-hidden">
            <h3 style="color:var(--v-primary); margin-top:0;">üèÜ Ranking Semanal</h3>
            <table class="v-ranking-table">
                <thead><tr><th>#</th><th>Nombre</th><th style="text-align:right;">Pts</th></tr></thead>
                <tbody id="v-ranking-body"></tbody>
            </table>
            <br>
            <button class="v-btn v-btn-secondary" onclick="location.reload()">Volver</button>
        </div>

    </div>

    <script>
        // Encapsulamos toda la l√≥gica en un objeto para no chocar con tu p√°gina
        const vGame = (function() {
            
            // --- DATOS DEL JUEGO ---
            const levels = [
                { id: 1, name: "Nivel 1: Anatom√≠a", count: 6, qs: [
                    {e:"üõ°Ô∏è", t:"¬øCu√°l es la capa m√°s externa y dura del diente?", o:["El Esmalte","La Dentina","La Pulpa","La Enc√≠a"], a:0, h:"Parte blanca y brillante."},
                    {e:"üë∂", t:"¬øCu√°ntos dientes de leche tiene un ni√±o?", o:["32","20","10","50"], a:1, h:"10 arriba y 10 abajo."},
                    {e:"‚öì", t:"¬øQu√© parte mantiene el diente pegado al hueso?", o:["Corona","Esmalte","Ra√≠z","Lengua"], a:2, h:"Est√° bajo la enc√≠a."},
                    {e:"üíó", t:"¬øC√≥mo se llama la parte rosada?", o:["Labio","Mejilla","Enc√≠a","Paladar"], a:2, h:"Es suave y rosa."},
                    {e:"‚ö°", t:"¬øQu√© hay en el centro del diente?", o:["Hueso","Aire","Pulpa (Nervio)","Agua"], a:2, h:"Siente fr√≠o y calor."},
                    {e:"üßõ", t:"¬øQu√© dientes desgarran la comida?", o:["Molares","Incisivos","Caninos","Premolares"], a:2, h:"Los colmillos."}
                ]},
                { id: 2, name: "Nivel 2: Higiene", count: 7, qs: [
                    {e:"ü™•", t:"¬øCu√°ntas veces debes cepillarte al d√≠a?", o:["1","2 (Min)","5","Domingos"], a:1, h:"Ma√±ana y noche."},
                    {e:"üßµ", t:"¬øPara limpiar ENTRE dientes?", o:["Cepillo","Enjuague","Hilo Dental","Palillos"], a:2, h:"Hilo muy fino."},
                    {e:"ü¶†", t:"¬øQu√© comen las bacterias?", o:["Agua","Az√∫car","Verduras","Aire"], a:1, h:"Aman los dulces."},
                    {e:"üìÖ", t:"¬øCu√°ndo cambiar cepillo?", o:["3 meses","1 a√±o","Nunca","1 semana"], a:0, h:"Cuando cerdas se abren."},
                    {e:"ü¶∑", t:"¬øMineral que fortalece el diente?", o:["Fresa","Fl√∫or","Az√∫car","Sal"], a:1, h:"Est√° en la pasta."},
                    {e:"ü©∏", t:"¬øSi sangra la enc√≠a?", o:["Dejarlo","Cepillar mejor","Comer","Nada"], a:1, h:"Sangra por suciedad."},
                    {e:"üçè", t:"¬øFruta que limpia?", o:["Galleta","Manzana","Caramelo","Pan"], a:1, h:"Fruta dura y fibrosa."}
                ]},
                { id: 3, name: "Nivel 3: Situaciones", count: 7, qs: [
                    {e:"ü•§", t:"¬øPor qu√© la Gaseosa es mala?", o:["Muy fr√≠a","√Åcido y Az√∫car","Tiene gas","No es mala"], a:1, h:"Da√±a esmalte."},
                    {e:"‚ùÑÔ∏è", t:"Dolor agudo con helado. ¬øQu√© es?", o:["Sensibilidad/Caries","Helado malo","Normal","Dolor cabeza"], a:0, h:"Esmalte da√±ado."},
                    {e:"üçæ", t:"¬øAbrir botella con dientes?", o:["S√≠","Claro","¬°Nunca!","Una vez"], a:2, h:"Se rompen."},
                    {e:"üò¥", t:"¬øDormir sin lavarse?", o:["Nada","Bacterias atacan m√°s","Dientes descansan","Se caen"], a:1, h:"Boca se seca."},
                    {e:"ü§ê", t:"¬øChuparse el dedo?", o:["Dientes chuecos","Blancos","Crecen r√°pido","Nada"], a:0, h:"Deforma mordida."},
                    {e:"üëÖ", t:"¬øCepillar la lengua?", o:["Color","Evitar mal aliento","Sabor","No"], a:1, h:"Guarda bacterias."},
                    {e:"üöë", t:"¬øSe cae diente definitivo?", o:["Basura","Jab√≥n","Leche y dentista","Llorar"], a:2, h:"Leche lo protege."}
                ]},
                { id: 4, name: "Nivel 4: Avanzado", count: 7, qs: [
                    {e:"üèóÔ∏è", t:"¬øLigamento Periodontal?", o:["Color","Une diente al hueso","Saliva","Corona"], a:1, h:"Amortiguador."},
                    {e:"üíé", t:"¬øSustancia m√°s dura del cuerpo?", o:["Hueso","Esmalte","U√±as","Cr√°neo"], a:1, h:"M√°s que hueso."},
                    {e:"üö™", t:"¬øCubre grietas de muelas?", o:["Sellantes","Frenillos","Nada","Blanqueo"], a:0, h:"Evita caries."},
                    {e:"üë¥", t:"¬ø√öltimas muelas en salir?", o:["Premolar","Canino","Muela Juicio","Incisivo"], a:2, h:"17-21 a√±os."},
                    {e:"ü§§", t:"¬øFunci√≥n Saliva?", o:["Mojar","Proteger y neutralizar","Sed","Nada"], a:1, h:"Defensor natural."},
                    {e:"üß±", t:"¬øQu√© es el Sarro?", o:["Placa dura","Comida","Caf√©","Roto"], a:0, h:"Placa calcificada."},
                    {e:"üò¨", t:"¬øQu√© es Bruxismo?", o:["Comer","Rechinar al dormir","Caries","Miedo"], a:1, h:"Por estr√©s."}
                ]},
                { id: 5, name: "Nivel 5: Experto", count: 7, qs: [
                    {e:"üì∏", t:"¬øVer dentro del hueso?", o:["Lupa","Espejo","Radiograf√≠a","Microscopio"], a:2, h:"Foto interna."},
                    {e:"ü§¢", t:"¬øHalitosis?", o:["Blancos","Frenillos","Mal aliento","Dolor"], a:2, h:"Olor desagradable."},
                    {e:"üöß", t:"¬øQu√© hacen los Brackets?", o:["Liman","Alinean dientes","Decoran","Blanquean"], a:1, h:"Mueven dientes."},
                    {e:"üç¨", t:"¬øDulce m√°s da√±ino?", o:["Chocolate","Caramelo pegajoso","Helado","Gelatina"], a:1, h:"Se pega mucho."},
                    {e:"üõ°Ô∏è", t:"¬øEvitar dolor siempre?", o:["Pastillas","Prevenci√≥n","Ayuno","Enjuague"], a:1, h:"Visita regular."},
                    {e:"üë®‚Äç‚öïÔ∏è", t:"¬øEspecialista ni√±os?", o:["Ortodoncista","Odontopediatra","Cirujano","Periodoncia"], a:1, h:"Pediatra."},
                    {e:"üèÅ", t:"¬øMejor sonrisa?", o:["Panader√≠a","Vitalis","Parque","Farmacia"], a:1, h:"¬°Vitalis!"}
                ]}
            ];

            // --- ESTADO ---
            let st = {
                user: { name:"", phone:"", email:"" },
                score: 0,
                lvl: 0,
                q: 0,
                unlocked: [true, false, false, false, false],
                failed: false
            };

            const fakeRank = [
                {n:"Mart√≠n G.", s:3200}, {n:"Ana R.", s:3000}, 
                {n:"Tom√°s L.", s:2850}, {n:"Javier S.", s:2500}
            ];

            // --- FUNCIONES UI ---
            function show(id) {
                const els = document.querySelectorAll('#v-game-content > div');
                els.forEach(e => e.classList.add('v-hidden'));
                document.getElementById(id).classList.remove('v-hidden');
            }

            // --- L√ìGICA ---
            function handleLogin(e) {
                e.preventDefault();
                const name = document.getElementById('v-input-name').value;
                const phone = document.getElementById('v-input-phone').value;
                
                // Check semanal
                const last = localStorage.getItem('v_played_'+phone);
                if(last && (new Date().getTime() - last) < 604800000) { // 7 d√≠as
                    show('v-screen-blocked'); return;
                }

                st.user = { name, phone };
                document.getElementById('v-player-name').innerText = name;
                document.getElementById('v-score-display').classList.remove('v-hidden');
                
                renderMenu();
                show('v-screen-menu');
            }

            function renderMenu() {
                const list = document.getElementById('v-levels-list');
                list.innerHTML = "";
                levels.forEach((l, i) => {
                    const lock = !st.unlocked[i];
                    const div = document.createElement('div');
                    div.className = `v-level-card ${lock?'v-locked':''}`;
                    div.onclick = () => !lock && startLevel(i);
                    div.innerHTML = `<div><b>${l.name}</b></div><div>${lock?'üîí':'‚ñ∂Ô∏è'}</div>`;
                    list.appendChild(div);
                });
            }

            function startLevel(idx) {
                st.lvl = idx; st.q = 0;
                show('v-screen-game');
                loadQ();
            }

            function loadQ() {
                const l = levels[st.lvl];
                const q = l.qs[st.q];
                
                document.getElementById('v-lvl-name').innerText = l.name;
                document.getElementById('v-q-counter').innerText = `${st.q+1}/${l.count}`;
                document.getElementById('v-q-emoji').innerText = q.e;
                document.getElementById('v-q-text').innerText = q.t;
                document.getElementById('v-hint-text').innerText = q.h;
                
                const box = document.getElementById('v-options-box');
                box.innerHTML = "";
                document.getElementById('v-hint-box').style.display = 'none';
                document.getElementById('v-next-btn').classList.add('v-hidden');
                st.failed = false;

                const pct = (st.q / l.count) * 100;
                document.getElementById('v-progress-bar').style.width = pct + "%";

                q.o.forEach((opt, idx) => {
                    const btn = document.createElement('button');
                    btn.className = 'v-option-btn';
                    btn.innerText = opt;
                    btn.onclick = () => check(idx, btn, q.a);
                    box.appendChild(btn);
                });
            }

            function check(sel, btn, corr) {
                const btns = document.querySelectorAll('.v-option-btn');
                if(sel === corr) {
                    btn.classList.add('v-correct');
                    btns.forEach(b => b.disabled = true);
                    st.score += st.failed ? 50 : 100;
                    document.getElementById('v-current-points').innerText = st.score;
                    document.getElementById('v-next-btn').classList.remove('v-hidden');
                } else {
                    btn.classList.add('v-wrong');
                    btn.disabled = true;
                    st.failed = true;
                    document.getElementById('v-hint-box').style.display = 'block';
                }
            }

            function nextQuestion() {
                const l = levels[st.lvl];
                st.q++;
                if(st.q < l.count) {
                    loadQ();
                } else {
                    if(st.lvl < levels.length - 1) {
                        st.unlocked[st.lvl+1] = true;
                        alert("¬°Nivel completado!");
                        renderMenu();
                        show('v-screen-menu');
                    } else {
                        endGame();
                    }
                }
            }

            function endGame() {
                localStorage.setItem('v_played_'+st.user.phone, new Date().getTime());
                saveRank(st.user.name, st.score);
                document.getElementById('v-final-score').innerText = st.score;
                
                if(st.score >= 2900) document.getElementById('v-coupon').classList.remove('v-hidden');
                show('v-screen-result');
            }

            function saveRank(n, s) {
                let r = JSON.parse(localStorage.getItem('v_rank')||'[]');
                if(r.length===0) r = [...fakeRank];
                r.push({n,s});
                r.sort((a,b)=>b.s-a.s);
                localStorage.setItem('v_rank', JSON.stringify(r));
            }

            function showRanking() {
                let r = JSON.parse(localStorage.getItem('v_rank')||'[]');
                if(r.length===0) r = [...fakeRank];
                const bod = document.getElementById('v-ranking-body');
                bod.innerHTML = "";
                r.slice(0,10).forEach((e,i)=>{
                    const tr = document.createElement('tr');
                    if(e.n === st.user.name) tr.className = 'v-user-row';
                    tr.innerHTML = `<td>${i+1}</td><td>${e.n}</td><td style="text-align:right">${e.s}</td>`;
                    bod.appendChild(tr);
                });
                show('v-screen-ranking');
            }

            // Public Methods
            return { handleLogin, nextQuestion, showRanking };
        })();
    </script>
</section>

<section id="contacto-footer" style="background: var(--dark-blue); color: white; text-align: center;">
        <p>&copy; 2022 Vitalis Cl√≠nica Odontol√≥gica.</p>
    </section>

    <script>
    function toggleMenu() {
        const menu = document.getElementById('menu-links');
        // Esto pone o quita la clase "active" que definimos en el CSS
        if (menu.style.display === "flex") {
            menu.style.display = "none";
        } else {
            menu.style.display = "flex";
        }
    }
</script>
</body>
</html>

</body>
</html>
</body>
</html>
